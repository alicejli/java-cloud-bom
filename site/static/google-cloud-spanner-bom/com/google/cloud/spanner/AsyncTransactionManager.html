<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.19) on Thu Jun 08 18:38:53 UTC 2023 -->
<title>AsyncTransactionManager (Google Cloud Spanner Parent 6.42.3 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-06-08">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsyncTransactionManager (Google Cloud Spanner Parent 6.42.3 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.google.cloud.spanner</a></div>
<h2 title="Interface AsyncTransactionManager" class="title">Interface AsyncTransactionManager</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">AsyncTransactionManager</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></pre>
<div class="block">An interface for managing the life cycle of a read write transaction including all its retries.
 See <a href="TransactionContext.html" title="interface in com.google.cloud.spanner"><code>TransactionContext</code></a> for a description of transaction semantics.

 <p>At any point in time there can be at most one active transaction in this manager. When that
 transaction is committed, if it fails with an <code>ABORTED</code> error, calling <a href="#resetForRetryAsync()"><code>resetForRetryAsync()</code></a> would create a new <a href="AsyncTransactionManager.TransactionContextFuture.html" title="interface in com.google.cloud.spanner"><code>AsyncTransactionManager.TransactionContextFuture</code></a>. The newly created
 transaction would use the same session thus increasing its lock priority. If the transaction is
 committed successfully, or is rolled back or commit fails with any error other than <code>
 ABORTED</code>, the manager is considered complete and no further transactions are allowed to be
 created in it.

 <p>Every <code>AsyncTransactionManager</code> should either be committed or rolled back. Failure to do
 so can cause resources to be leaked and deadlocks. Easiest way to guarantee this is by calling
 <a href="#close()"><code>close()</code></a> in a finally block.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>DatabaseClient#transactionManagerAsync()</code></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="AsyncTransactionManager.AsyncTransactionFunction.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.AsyncTransactionFunction</a>&lt;<a href="AsyncTransactionManager.AsyncTransactionFunction.html" title="type parameter in AsyncTransactionManager.AsyncTransactionFunction">I</a>,&#8203;<a href="AsyncTransactionManager.AsyncTransactionFunction.html" title="type parameter in AsyncTransactionManager.AsyncTransactionFunction">O</a>&gt;</span></code></th>
<td class="colLast">
<div class="block">Each step in a transaction chain is defined by an <a href="AsyncTransactionManager.AsyncTransactionFunction.html" title="interface in com.google.cloud.spanner"><code>AsyncTransactionManager.AsyncTransactionFunction</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="AsyncTransactionManager.AsyncTransactionStep.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.AsyncTransactionStep</a>&lt;<a href="AsyncTransactionManager.AsyncTransactionStep.html" title="type parameter in AsyncTransactionManager.AsyncTransactionStep">I</a>,&#8203;<a href="AsyncTransactionManager.AsyncTransactionStep.html" title="type parameter in AsyncTransactionManager.AsyncTransactionStep">O</a>&gt;</span></code></th>
<td class="colLast">
<div class="block"><a href="AsyncTransactionManager.AsyncTransactionStep.html" title="interface in com.google.cloud.spanner"><code>AsyncTransactionManager.AsyncTransactionStep</code></a> is returned by <code>TransactionContextFuture#then(AsyncTransactionFunction)</code> and <code>AsyncTransactionStep#then(AsyncTransactionFunction)</code> and allows transaction steps that should
 be executed serially to be chained together.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="AsyncTransactionManager.CommitTimestampFuture.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.CommitTimestampFuture</a></span></code></th>
<td class="colLast">
<div class="block"><code>ApiFuture</code> that returns the commit <code>Timestamp</code> of a Cloud Spanner transaction that
 is executed using an <a href="AsyncTransactionManager.html" title="interface in com.google.cloud.spanner"><code>AsyncTransactionManager</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="AsyncTransactionManager.TransactionContextFuture.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.TransactionContextFuture</a></span></code></th>
<td class="colLast">
<div class="block"><code>ApiFuture</code> that returns a <a href="TransactionContext.html" title="interface in com.google.cloud.spanner"><code>TransactionContext</code></a> and that supports chaining of
 multiple <a href="AsyncTransactionManager.TransactionContextFuture.html" title="interface in com.google.cloud.spanner"><code>AsyncTransactionManager.TransactionContextFuture</code></a>s to form a transaction.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="AsyncTransactionManager.TransactionContextFuture.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.TransactionContextFuture</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#beginAsync()">beginAsync</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a new read write transaction.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Closes the manager.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>com.google.api.core.ApiFuture&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang" class="externalLink">Void</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#closeAsync()">closeAsync</a></span>()</code></th>
<td class="colLast">
<div class="block">Closes the transaction manager.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>com.google.api.core.ApiFuture&lt;<a href="CommitResponse.html" title="class in com.google.cloud.spanner">CommitResponse</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCommitResponse()">getCommitResponse</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the <a href="CommitResponse.html" title="class in com.google.cloud.spanner"><code>CommitResponse</code></a> of this transaction.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="TransactionManager.TransactionState.html" title="enum in com.google.cloud.spanner">TransactionManager.TransactionState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getState()">getState</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the state of the transaction.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="AsyncTransactionManager.TransactionContextFuture.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.TransactionContextFuture</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resetForRetryAsync()">resetForRetryAsync</a></span>()</code></th>
<td class="colLast">
<div class="block">Creates a new transaction for retry.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>com.google.api.core.ApiFuture&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang" class="externalLink">Void</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#rollbackAsync()">rollbackAsync</a></span>()</code></th>
<td class="colLast">
<div class="block">Rolls back the currently active transaction.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="beginAsync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beginAsync</h4>
<pre class="methodSignature"><a href="AsyncTransactionManager.TransactionContextFuture.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.TransactionContextFuture</a>&nbsp;beginAsync()</pre>
<div class="block">Creates a new read write transaction. This must be called before doing any other operation and
 can only be called once. To create a new transaction for subsequent retries, see <code>#resetForRetry()</code>.</div>
</li>
</ul>
<a id="rollbackAsync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollbackAsync</h4>
<pre class="methodSignature">com.google.api.core.ApiFuture&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang" class="externalLink">Void</a>&gt;&nbsp;rollbackAsync()</pre>
<div class="block">Rolls back the currently active transaction. In most cases there should be no need to call this
 explicitly since <a href="#close()"><code>close()</code></a> would automatically roll back any active transaction.</div>
</li>
</ul>
<a id="resetForRetryAsync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetForRetryAsync</h4>
<pre class="methodSignature"><a href="AsyncTransactionManager.TransactionContextFuture.html" title="interface in com.google.cloud.spanner">AsyncTransactionManager.TransactionContextFuture</a>&nbsp;resetForRetryAsync()</pre>
<div class="block">Creates a new transaction for retry. This should only be called if the previous transaction
 failed with <code>ABORTED</code>. In all other cases, this will throw an <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang" class="externalLink"><code>IllegalStateException</code></a>. Users should backoff before calling this method. Backoff delay is
 specified by <a href="SpannerException.html#getRetryDelayInMillis()"><code>SpannerException.getRetryDelayInMillis()</code></a> on the <code>SpannerException</code>
 throw by the previous commit call.</div>
</li>
</ul>
<a id="getState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getState</h4>
<pre class="methodSignature"><a href="TransactionManager.TransactionState.html" title="enum in com.google.cloud.spanner">TransactionManager.TransactionState</a>&nbsp;getState()</pre>
<div class="block">Returns the state of the transaction.</div>
</li>
</ul>
<a id="getCommitResponse()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitResponse</h4>
<pre class="methodSignature">com.google.api.core.ApiFuture&lt;<a href="CommitResponse.html" title="class in com.google.cloud.spanner">CommitResponse</a>&gt;&nbsp;getCommitResponse()</pre>
<div class="block">Returns the <a href="CommitResponse.html" title="class in com.google.cloud.spanner"><code>CommitResponse</code></a> of this transaction.</div>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">void&nbsp;close()</pre>
<div class="block">Closes the manager. If there is an active transaction, it will be rolled back. Underlying
 session will be released back to the session pool.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang" class="externalLink">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code></dd>
</dl>
</li>
</ul>
<a id="closeAsync()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>closeAsync</h4>
<pre class="methodSignature">com.google.api.core.ApiFuture&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang" class="externalLink">Void</a>&gt;&nbsp;closeAsync()</pre>
<div class="block">Closes the transaction manager. If there is an active transaction, it will be rolled back. The
 underlying session will be released back to the session pool. The returned <code>ApiFuture</code> is
 done when the transaction (if any) has been rolled back.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2023 Google LLC. All rights reserved.</small></p>
</footer>
</body>
</html>
